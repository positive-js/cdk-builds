/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@ptsecurity/cdk/platform"),require("rxjs"),require("rxjs/operators"),require("@ptsecurity/cdk/bidi")):"function"==typeof define&&define.amd?define("@ptsecurity/cdk/scrolling",["exports","@angular/core","@ptsecurity/cdk/platform","rxjs","rxjs/operators","@ptsecurity/cdk/bidi"],e):e((t.ng=t.ng||{},t.ng.cdk=t.ng.cdk||{},t.ng.cdk.scrolling={}),t.ng.core,t.ng.cdk.platform,t.rxjs,t.rxjs.operators,t.ng.cdk.bidi)}(this,function(t,e,r,o,n,i){"use strict";function l(t,e,r,o){var n,i=arguments.length,l=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,r,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(l=(i<3?n(l):i>3?n(e,r,l):n(e,r))||l);return i>3&&l&&Object.defineProperty(e,r,l),l}function s(t,e){return function(r,o){e(r,o,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,r){return t||new h(e,r)}var p=function(){function t(t,e){this.ngZone=t,this.platform=e,this.scrollContainers=new Map,this._globalSubscription=null,this._scrolled=new o.Subject,this.scrolledCount=0}return t.prototype.register=function(t){var e=this,r=t.elementScrolled().subscribe(function(){return e._scrolled.next(t)});this.scrollContainers.set(t,r)},t.prototype.deregister=function(t){var e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))},t.prototype.scrolled=function(t){var e=this;return void 0===t&&(t=20),this.platform.isBrowser?o.Observable.create(function(r){e._globalSubscription||e.addGlobalListener();var o=t>0?e._scrolled.pipe(n.auditTime(t)).subscribe(r):e._scrolled.subscribe(r);return e.scrolledCount++,function(){o.unsubscribe(),--e.scrolledCount||e.removeGlobalListener()}}):o.of()},t.prototype.ngOnDestroy=function(){var t=this;this.removeGlobalListener(),this.scrollContainers.forEach(function(e,r){return t.deregister(r)}),this._scrolled.complete()},t.prototype.ancestorScrolled=function(t,e){var r=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(n.filter(function(t){return!t||r.indexOf(t)>-1}))},t.prototype.getAncestorScrollContainers=function(t){var e=this,r=[];return this.scrollContainers.forEach(function(o,n){e.scrollableContainsElement(n,t)&&r.push(n)}),r},t.prototype.scrollableContainsElement=function(t,e){var r=e.nativeElement,o=t.getElementRef().nativeElement;do{if(r===o)return!0}while(r=r.parentElement);return!1},t.prototype.addGlobalListener=function(){var t=this;this._globalSubscription=this.ngZone.runOutsideAngular(function(){return o.fromEvent(window.document,"scroll").subscribe(function(){return t._scrolled.next()})})},t.prototype.removeGlobalListener=function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t(e.inject(e.NgZone),e.inject(r.Platform))},token:t,providedIn:"root"}),t=l([e.Injectable({providedIn:"root"}),c("design:paramtypes",[e.NgZone,r.Platform])],t)}(),f=function(){function t(t,e,r,i){var l=this;this.elementRef=t,this.scrollDispatcher=e,this.ngZone=r,this.dir=i,this.destroyed=new o.Subject,this._elementScrolled=o.Observable.create(function(t){return l.ngZone.runOutsideAngular(function(){return o.fromEvent(l.elementRef.nativeElement,"scroll").pipe(n.takeUntil(l.destroyed)).subscribe(t)})})}return t.prototype.ngOnInit=function(){this.scrollDispatcher.register(this)},t.prototype.ngOnDestroy=function(){this.scrollDispatcher.deregister(this),this.destroyed.next(),this.destroyed.complete()},t.prototype.elementScrolled=function(){return this._elementScrolled},t.prototype.getElementRef=function(){return this.elementRef},t.prototype.scrollTo=function(t){var e=this.elementRef.nativeElement,o=this.dir&&"rtl"==this.dir.value;t.left=null==t.left?o?t.end:t.start:t.left,t.right=null==t.right?o?t.start:t.end:t.right,null!=t.bottom&&(t.top=e.scrollHeight-e.clientHeight-t.bottom),o&&r.getRtlScrollAxisType()!=r.RtlScrollAxisType.NORMAL?(null!=t.left&&(t.right=e.scrollWidth-e.clientWidth-t.left),r.getRtlScrollAxisType()==r.RtlScrollAxisType.INVERTED?t.left=t.right:r.getRtlScrollAxisType()==r.RtlScrollAxisType.NEGATED&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=e.scrollWidth-e.clientWidth-t.right),this.applyScrollToOptions(t)},t.prototype.measureScrollOffset=function(t){var e=this.elementRef.nativeElement;if("top"==t)return e.scrollTop;if("bottom"==t)return e.scrollHeight-e.clientHeight-e.scrollTop;var o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?"right":"left":"end"==t&&(t=o?"left":"right"),o&&r.getRtlScrollAxisType()==r.RtlScrollAxisType.INVERTED?"left"==t?e.scrollWidth-e.clientWidth-e.scrollLeft:e.scrollLeft:o&&r.getRtlScrollAxisType()==r.RtlScrollAxisType.NEGATED?"left"==t?e.scrollLeft+e.scrollWidth-e.clientWidth:-e.scrollLeft:"left"==t?e.scrollLeft:e.scrollWidth-e.clientWidth-e.scrollLeft},t.prototype.applyScrollToOptions=function(t){var e=this.elementRef.nativeElement;r.supportsScrollBehavior()?e.scrollTo(t):(null!=t.top&&(e.scrollTop=t.top),null!=t.left&&(e.scrollLeft=t.left))},t=l([e.Directive({selector:"[cdk-scrollable], [cdkScrollable]"}),s(3,e.Optional()),c("design:paramtypes",[e.ElementRef,p,e.NgZone,i.Directionality])],t)}(),a=function(){function t(){}return t=l([e.NgModule({imports:[i.BidiModule,r.PlatformModule],exports:[i.BidiModule,f],declarations:[f]})],t)}(),d=function(){function t(){}return t=l([e.NgModule({imports:[a],exports:[a]})],t)}(),h=function(){function t(t,e){var r=this;this._platform=t,e.runOutsideAngular(function(){r._change=t.isBrowser?o.merge(o.fromEvent(window,"resize"),o.fromEvent(window,"orientationchange")):o.of(),r._invalidateCache=r.change().subscribe(function(){return r._updateViewportSize()})})}return t.prototype.ngOnDestroy=function(){this._invalidateCache.unsubscribe()},t.prototype.getViewportSize=function(){this._viewportSize||this._updateViewportSize();var t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t},t.prototype.getViewportRect=function(){var t=this.getViewportScrollPosition(),e=this.getViewportSize(),r=e.width,o=e.height;return{top:t.top,left:t.left,bottom:t.top+o,right:t.left+r,height:o,width:r}},t.prototype.getViewportScrollPosition=function(){if(!this._platform.isBrowser)return{top:0,left:0};var t=document.documentElement,e=t.getBoundingClientRect();return{top:-e.top||document.body.scrollTop||window.scrollY||document.documentElement.scrollTop||0,left:-e.left||document.body.scrollLeft||window.scrollX||document.documentElement.scrollLeft||0}},t.prototype.change=function(t){return void 0===t&&(t=20),t>0?this._change.pipe(n.auditTime(t)):this._change},t.prototype._updateViewportSize=function(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t(e.inject(r.Platform),e.inject(e.NgZone))},token:t,providedIn:"root"}),t=l([e.Injectable({providedIn:"root"}),c("design:paramtypes",[r.Platform,e.NgZone])],t)}(),g={provide:h,deps:[[new e.Optional,new e.SkipSelf,h],r.Platform,e.NgZone],useFactory:u};t.DEFAULT_SCROLL_TIME=20,t.ScrollDispatcher=p,t.CdkScrollable=f,t.ScrollingModule=a,t.ScrollDispatchModule=d,t.DEFAULT_RESIZE_TIME=20,t.ViewportRuler=h,t.VIEWPORT_RULER_PROVIDER_FACTORY=u,t.VIEWPORT_RULER_PROVIDER=g,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=cdk-scrolling.umd.min.js.map
