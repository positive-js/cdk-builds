/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@ptsecurity/cdk/platform"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ptsecurity/cdk/scrolling",["exports","@angular/core","@ptsecurity/cdk/platform","rxjs","rxjs/operators"],t):t((e.ng=e.ng||{},e.ng.cdk=e.ng.cdk||{},e.ng.cdk.scrolling={}),e.ng.core,e.ng.cdk.platform,e.rxjs,e.rxjs.operators)}(this,function(e,t,n,r,o){"use strict";function i(e,t,n,r){var o,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(l=(i<3?o(l):i>3?o(t,n,l):o(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function s(e,t,n){return e||new a(t,n)}var c=function(){function e(e,t){this._ngZone=e,this._platform=t,this.scrollContainers=new Map,this._globalSubscription=null,this._scrolled=new r.Subject,this._scrolledCount=0}return e.prototype.register=function(e){var t=this,n=e.elementScrolled().subscribe(function(){return t._scrolled.next(e)});this.scrollContainers.set(e,n)},e.prototype.deregister=function(e){var t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))},e.prototype.scrolled=function(e){var t=this;return void 0===e&&(e=20),this._platform.isBrowser?r.Observable.create(function(n){t._globalSubscription||t._addGlobalListener();var r=e>0?t._scrolled.pipe(o.auditTime(e)).subscribe(n):t._scrolled.subscribe(n);return t._scrolledCount++,function(){r.unsubscribe(),--t._scrolledCount||t._removeGlobalListener()}}):r.of()},e.prototype.ngOnDestroy=function(){var e=this;this._removeGlobalListener(),this.scrollContainers.forEach(function(t,n){return e.deregister(n)}),this._scrolled.complete()},e.prototype.ancestorScrolled=function(e,t){var n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(o.filter(function(e){return!e||n.indexOf(e)>-1}))},e.prototype.getAncestorScrollContainers=function(e){var t=this,n=[];return this.scrollContainers.forEach(function(r,o){t._scrollableContainsElement(o,e)&&n.push(o)}),n},e.prototype._scrollableContainsElement=function(e,t){var n=t.nativeElement,r=e.getElementRef().nativeElement;do{if(n===r)return!0}while(n=n.parentElement);return!1},e.prototype._addGlobalListener=function(){var e=this;this._globalSubscription=this._ngZone.runOutsideAngular(function(){return r.fromEvent(window.document,"scroll").subscribe(function(){return e._scrolled.next()})})},e.prototype._removeGlobalListener=function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)},e.ngInjectableDef=t.defineInjectable({factory:function(){return new e(t.inject(t.NgZone),t.inject(n.Platform))},token:e,providedIn:"root"}),e=i([t.Injectable({providedIn:"root"}),l("design:paramtypes",[t.NgZone,n.Platform])],e)}(),u=function(){function e(e,t,n){var o=this;this._elementRef=e,this._scroll=t,this._ngZone=n,this._elementScrolled=new r.Subject,this._scrollListener=function(e){return o._elementScrolled.next(e)}}return e.prototype.ngOnInit=function(){var e=this;this._ngZone.runOutsideAngular(function(){e.getElementRef().nativeElement.addEventListener("scroll",e._scrollListener)}),this._scroll.register(this)},e.prototype.ngOnDestroy=function(){this._scroll.deregister(this),this._scrollListener&&this.getElementRef().nativeElement.removeEventListener("scroll",this._scrollListener),this._elementScrolled.complete()},e.prototype.elementScrolled=function(){return this._elementScrolled.asObservable()},e.prototype.getElementRef=function(){return this._elementRef},e=i([t.Directive({selector:"[cdk-scrollable], [cdkScrollable]"}),l("design:paramtypes",[t.ElementRef,c,t.NgZone])],e)}(),a=function(){function e(e,t){var n=this;this._platform=e,this._change=e.isBrowser?t.runOutsideAngular(function(){return r.merge(r.fromEvent(window,"resize"),r.fromEvent(window,"orientationchange"))}):r.of(),this._invalidateCache=this.change().subscribe(function(){return n._updateViewportSize()})}return e.prototype.ngOnDestroy=function(){this._invalidateCache.unsubscribe()},e.prototype.getViewportSize=function(){this._viewportSize||this._updateViewportSize();var e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e},e.prototype.getViewportRect=function(){var e=this.getViewportScrollPosition(),t=this.getViewportSize(),n=t.width,r=t.height;return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}},e.prototype.getViewportScrollPosition=function(){if(!this._platform.isBrowser)return{top:0,left:0};var e=document.documentElement.getBoundingClientRect();return{top:-e.top||document.body.scrollTop||window.scrollY||document.documentElement.scrollTop||0,left:-e.left||document.body.scrollLeft||window.scrollX||document.documentElement.scrollLeft||0}},e.prototype.change=function(e){return void 0===e&&(e=20),e>0?this._change.pipe(o.auditTime(e)):this._change},e.prototype._updateViewportSize=function(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}},e.ngInjectableDef=t.defineInjectable({factory:function(){return new e(t.inject(n.Platform),t.inject(t.NgZone))},token:e,providedIn:"root"}),e=i([t.Injectable({providedIn:"root"}),l("design:paramtypes",[n.Platform,t.NgZone])],e)}(),p={provide:a,deps:[[new t.Optional,new t.SkipSelf,a],n.Platform,t.NgZone],useFactory:s},f=function(){function e(){}return e=i([t.NgModule({imports:[n.PlatformModule],exports:[u],declarations:[u]})],e)}();e.DEFAULT_SCROLL_TIME=20,e.ScrollDispatcher=c,e.CdkScrollable=u,e.DEFAULT_RESIZE_TIME=20,e.ViewportRuler=a,e.VIEWPORT_RULER_PROVIDER_FACTORY=s,e.VIEWPORT_RULER_PROVIDER=p,e.ScrollDispatchModule=f,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=cdk-scrolling.umd.min.js.map
