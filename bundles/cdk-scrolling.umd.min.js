/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@ptsecurity/cdk/platform"),require("rxjs"),require("rxjs/operators"),require("@ptsecurity/cdk/bidi"),require("@ptsecurity/cdk/coercion"),require("@ptsecurity/cdk/collections")):"function"==typeof define&&define.amd?define("@ptsecurity/cdk/scrolling",["exports","@angular/core","@ptsecurity/cdk/platform","rxjs","rxjs/operators","@ptsecurity/cdk/bidi","@ptsecurity/cdk/coercion","@ptsecurity/cdk/collections"],e):e((t.ng=t.ng||{},t.ng.cdk=t.ng.cdk||{},t.ng.cdk.scrolling={}),t.ng.core,t.ng.cdk.platform,t.rxjs,t.rxjs.operators,t.ng.cdk.bidi,t.ng.cdk.coercion,t.ng.cdk.collections)}(this,function(t,e,r,n,i,o,a,s){"use strict";function l(t,e){function r(){this.constructor=t}_(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function c(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a}function d(t,e){return function(r,n){e(r,n,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function p(t){return t._scrollStrategy}function h(t,e){return t.start==e.start&&t.end==e.end}function f(t,e){var r=e;if(!r.getBoundingClientRect)return 0;var n=r.getBoundingClientRect();return"horizontal"==t?n.width:n.height}function g(t,e,r){return t||new k(e,r)}var _=function(t,e){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},m=function(){function t(t,e){this.ngZone=t,this.platform=e,this.scrollContainers=new Map,this._globalSubscription=null,this._scrolled=new n.Subject,this.scrolledCount=0}return t.prototype.register=function(t){var e=this;this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(function(){return e._scrolled.next(t)}))},t.prototype.deregister=function(t){var e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))},t.prototype.scrolled=function(t){var e=this;return void 0===t&&(t=20),this.platform.isBrowser?n.Observable.create(function(r){e._globalSubscription||e.addGlobalListener();var n=t>0?e._scrolled.pipe(i.auditTime(t)).subscribe(r):e._scrolled.subscribe(r);return e.scrolledCount++,function(){n.unsubscribe(),--e.scrolledCount||e.removeGlobalListener()}}):n.of()},t.prototype.ngOnDestroy=function(){var t=this;this.removeGlobalListener(),this.scrollContainers.forEach(function(e,r){return t.deregister(r)}),this._scrolled.complete()},t.prototype.ancestorScrolled=function(t,e){var r=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(i.filter(function(t){return!t||r.indexOf(t)>-1}))},t.prototype.getAncestorScrollContainers=function(t){var e=this,r=[];return this.scrollContainers.forEach(function(n,i){e.scrollableContainsElement(i,t)&&r.push(i)}),r},t.prototype.scrollableContainsElement=function(t,e){var r=e.nativeElement,n=t.getElementRef().nativeElement;do{if(r==n)return!0}while(r=r.parentElement);return!1},t.prototype.addGlobalListener=function(){var t=this;this._globalSubscription=this.ngZone.runOutsideAngular(function(){return n.fromEvent(window.document,"scroll").subscribe(function(){return t._scrolled.next()})})},t.prototype.removeGlobalListener=function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t(e.inject(e.NgZone),e.inject(r.Platform))},token:t,providedIn:"root"}),t=c([e.Injectable({providedIn:"root"}),u("design:paramtypes",[e.NgZone,r.Platform])],t)}(),v=function(){function t(t,e,r,o){var a=this;this.elementRef=t,this.scrollDispatcher=e,this.ngZone=r,this.dir=o,this.destroyed=new n.Subject,this._elementScrolled=n.Observable.create(function(t){return a.ngZone.runOutsideAngular(function(){return n.fromEvent(a.elementRef.nativeElement,"scroll").pipe(i.takeUntil(a.destroyed)).subscribe(t)})})}return t.prototype.ngOnInit=function(){this.scrollDispatcher.register(this)},t.prototype.ngOnDestroy=function(){this.scrollDispatcher.deregister(this),this.destroyed.next(),this.destroyed.complete()},t.prototype.elementScrolled=function(){return this._elementScrolled},t.prototype.getElementRef=function(){return this.elementRef},t.prototype.scrollTo=function(t){var e=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;t.left=null==t.left?n?t.end:t.start:t.left,t.right=null==t.right?n?t.start:t.end:t.right,null!=t.bottom&&(t.top=e.scrollHeight-e.clientHeight-t.bottom),n&&r.getRtlScrollAxisType()!=r.RtlScrollAxisType.NORMAL?(null!=t.left&&(t.right=e.scrollWidth-e.clientWidth-t.left),r.getRtlScrollAxisType()==r.RtlScrollAxisType.INVERTED?t.left=t.right:r.getRtlScrollAxisType()==r.RtlScrollAxisType.NEGATED&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=e.scrollWidth-e.clientWidth-t.right),this.applyScrollToOptions(t)},t.prototype.measureScrollOffset=function(t){var e=this.elementRef.nativeElement;if("top"==t)return e.scrollTop;if("bottom"==t)return e.scrollHeight-e.clientHeight-e.scrollTop;var n=this.dir&&"rtl"==this.dir.value;return"start"==t?t=n?"right":"left":"end"==t&&(t=n?"left":"right"),n&&r.getRtlScrollAxisType()==r.RtlScrollAxisType.INVERTED?"left"==t?e.scrollWidth-e.clientWidth-e.scrollLeft:e.scrollLeft:n&&r.getRtlScrollAxisType()==r.RtlScrollAxisType.NEGATED?"left"==t?e.scrollLeft+e.scrollWidth-e.clientWidth:-e.scrollLeft:"left"==t?e.scrollLeft:e.scrollWidth-e.clientWidth-e.scrollLeft},t.prototype.applyScrollToOptions=function(t){var e=this.elementRef.nativeElement;r.supportsScrollBehavior()?e.scrollTo(t):(null!=t.top&&(e.scrollTop=t.top),null!=t.left&&(e.scrollLeft=t.left))},t=c([e.Directive({selector:"[cdk-scrollable], [cdkScrollable]"}),d(3,e.Optional()),u("design:paramtypes",[e.ElementRef,m,e.NgZone,o.Directionality])],t)}(),y=new e.InjectionToken("VIRTUAL_SCROLL_STRATEGY"),S=function(){function t(t,e,r){this._scrolledIndexChange=new n.Subject,this.scrolledIndexChange=this._scrolledIndexChange.pipe(i.distinctUntilChanged()),this._viewport=null,this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=r}return t.prototype.attach=function(t){this._viewport=t,this._updateTotalContentSize(),this._updateRenderedRange()},t.prototype.detach=function(){this._scrolledIndexChange.complete(),this._viewport=null},t.prototype.updateItemAndBufferSize=function(t,e,r){if(r<e)throw Error("CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx");this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=r,this._updateTotalContentSize(),this._updateRenderedRange()},t.prototype.onContentScrolled=function(){this._updateRenderedRange()},t.prototype.onDataLengthChanged=function(){this._updateTotalContentSize(),this._updateRenderedRange()},t.prototype.onContentRendered=function(){},t.prototype.onRenderedOffsetChanged=function(){},t.prototype.scrollToIndex=function(t,e){this._viewport&&this._viewport.scrollToOffset(t*this._itemSize,e)},t.prototype._updateTotalContentSize=function(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)},t.prototype._updateRenderedRange=function(){if(this._viewport){var t=this._viewport.measureScrollOffset(),e=t/this._itemSize,r=this._viewport.getRenderedRange(),n={start:r.start,end:r.end},i=this._viewport.getViewportSize(),o=this._viewport.getDataLength(),a=t-n.start*this._itemSize;if(a<this._minBufferPx&&0!=n.start){var s=Math.ceil((this._maxBufferPx-a)/this._itemSize);n.start=Math.max(0,n.start-s),n.end=Math.min(o,Math.ceil(e+(i+this._minBufferPx)/this._itemSize))}else{var l=n.end*this._itemSize-(t+i);if(l<this._minBufferPx&&n.end!=o){var c=Math.ceil((this._maxBufferPx-l)/this._itemSize);c>0&&(n.end=Math.min(o,n.end+c),n.start=Math.max(0,Math.floor(e-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(n),this._viewport.setRenderedContentOffset(this._itemSize*n.start),this._scrolledIndexChange.next(Math.floor(e))}},t}(),w=function(){function t(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new S(this.itemSize,this.minBufferPx,this.maxBufferPx)}r=t,Object.defineProperty(t.prototype,"itemSize",{get:function(){return this._itemSize},set:function(t){this._itemSize=a.coerceNumberProperty(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minBufferPx",{get:function(){return this._minBufferPx},set:function(t){this._minBufferPx=a.coerceNumberProperty(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxBufferPx",{get:function(){return this._maxBufferPx},set:function(t){this._maxBufferPx=a.coerceNumberProperty(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)};var r;return c([e.Input(),u("design:type",Number),u("design:paramtypes",[Number])],t.prototype,"itemSize",null),c([e.Input(),u("design:type",Number),u("design:paramtypes",[Number])],t.prototype,"minBufferPx",null),c([e.Input(),u("design:type",Number),u("design:paramtypes",[Number])],t.prototype,"maxBufferPx",null),t=r=c([e.Directive({selector:"cdk-virtual-scroll-viewport[itemSize]",providers:[{provide:y,useFactory:p,deps:[e.forwardRef(function(){return r})]}]})],t)}(),b=function(t){function r(e,r,i,o,a,s){var l=t.call(this,e,s,i,a)||this;if(l.elementRef=e,l._changeDetectorRef=r,l._scrollStrategy=o,l.orientation="vertical",l.scrolledIndexChange=n.Observable.create(function(t){return l._scrollStrategy.scrolledIndexChange.subscribe(function(e){return Promise.resolve().then(function(){return l.ngZone.run(function(){return t.next(e)})})})}),l._detachedSubject=new n.Subject,l._renderedRangeSubject=new n.Subject,l.renderedRangeStream=l._renderedRangeSubject.asObservable(),l._totalContentSizeTransform="",l._totalContentSize=0,l._renderedRange={start:0,end:0},l._dataLength=0,l._viewportSize=0,l._renderedContentOffset=0,l._renderedContentOffsetNeedsRewrite=!1,l._isChangeDetectionPending=!1,l._runAfterChangeDetection=[],!o)throw Error('Error: cdk-virtual-scroll-viewport requires the "itemSize" property to be set.');return l}l(r,t),a=r,r.prototype.ngOnInit=function(){var e=this;t.prototype.ngOnInit.call(this),this.ngZone.runOutsideAngular(function(){return Promise.resolve().then(function(){e._measureViewportSize(),e._scrollStrategy.attach(e),e.elementScrolled().pipe(i.startWith(null),i.auditTime(0,n.animationFrameScheduler)).subscribe(function(){return e._scrollStrategy.onContentScrolled()}),e._markChangeDetectionNeeded()})})},r.prototype.ngOnDestroy=function(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),t.prototype.ngOnDestroy.call(this)},r.prototype.attach=function(t){var e=this;if(this._forOf)throw Error("CdkVirtualScrollViewport is already attached.");this.ngZone.runOutsideAngular(function(){e._forOf=t,e._forOf.dataStream.pipe(i.takeUntil(e._detachedSubject)).subscribe(function(t){var r=t.length;r!==e._dataLength&&(e._dataLength=r,e._scrollStrategy.onDataLengthChanged()),e._doChangeDetection()})})},r.prototype.detach=function(){this._forOf=null,this._detachedSubject.next()},r.prototype.getDataLength=function(){return this._dataLength},r.prototype.getViewportSize=function(){return this._viewportSize},r.prototype.getRenderedRange=function(){return this._renderedRange},r.prototype.setTotalContentSize=function(t){if(this._totalContentSize!==t){this._totalContentSize=t;var e="horizontal"==this.orientation?"X":"Y";this._totalContentSizeTransform="scale"+e+"("+this._totalContentSize+")",this._markChangeDetectionNeeded()}},r.prototype.setRenderedRange=function(t){var e=this;h(this._renderedRange,t)||(this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(function(){return e._scrollStrategy.onContentRendered()}))},r.prototype.getOffsetToRenderedContentStart=function(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset},r.prototype.setRenderedContentOffset=function(t,e){var r=this;void 0===e&&(e="to-start");var n=this.dir&&"rtl"==this.dir.value,i="horizontal"==this.orientation,o=i?"X":"Y",a=i&&n?-1:1,s="translate"+o+"("+Number(a*t)+"px)";this._renderedContentOffset=t,"to-end"===e&&(s+=" translate"+o+"(-100%)",this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=s&&(this._renderedContentTransform=s,this._markChangeDetectionNeeded(function(){r._renderedContentOffsetNeedsRewrite?(r._renderedContentOffset-=r.measureRenderedContentSize(),r._renderedContentOffsetNeedsRewrite=!1,r.setRenderedContentOffset(r._renderedContentOffset)):r._scrollStrategy.onRenderedOffsetChanged()}))},r.prototype.scrollToOffset=function(t,e){void 0===e&&(e="auto");var r={behavior:e};"horizontal"===this.orientation?r.start=t:r.top=t,this.scrollTo(r)},r.prototype.scrollToIndex=function(t,e){void 0===e&&(e="auto"),this._scrollStrategy.scrollToIndex(t,e)},r.prototype.measureScrollOffset=function(e){return t.prototype.measureScrollOffset.call(this,e||("horizontal"===this.orientation?"start":"top"))},r.prototype.measureRenderedContentSize=function(){var t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight},r.prototype.measureRangeSize=function(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0},r.prototype.checkViewportSize=function(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()},r.prototype._measureViewportSize=function(){var t=this.elementRef.nativeElement;this._viewportSize="horizontal"===this.orientation?t.clientWidth:t.clientHeight},r.prototype._markChangeDetectionNeeded=function(t){var e=this;t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(function(){return Promise.resolve().then(function(){e._doChangeDetection()})}))},r.prototype._doChangeDetection=function(){var t=this;this._isChangeDetectionPending=!1,this.ngZone.run(function(){return t._changeDetectorRef.markForCheck()}),this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform;var e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(var r=0,n=e;r<n.length;r++){(0,n[r])()}};var a;return c([e.Input(),u("design:type",String)],r.prototype,"orientation",void 0),c([e.Output(),u("design:type",n.Observable)],r.prototype,"scrolledIndexChange",void 0),c([e.ViewChild("contentWrapper"),u("design:type",e.ElementRef)],r.prototype,"_contentWrapper",void 0),r=a=c([e.Component({selector:"cdk-virtual-scroll-viewport",template:'<div #contentWrapper class="cdk-virtual-scroll-content-wrapper"><ng-content></ng-content></div><div class="cdk-virtual-scroll-spacer" [style.transform]="_totalContentSizeTransform"></div>',styles:["cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:0}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:0}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}"],host:{class:"cdk-virtual-scroll-viewport","[class.cdk-virtual-scroll-orientation-horizontal]":'orientation === "horizontal"',"[class.cdk-virtual-scroll-orientation-vertical]":'orientation !== "horizontal"'},encapsulation:e.ViewEncapsulation.None,changeDetection:e.ChangeDetectionStrategy.OnPush,providers:[{provide:v,useExisting:a}]}),d(3,e.Optional()),d(3,e.Inject(y)),d(4,e.Optional()),u("design:paramtypes",[e.ElementRef,e.ChangeDetectorRef,e.NgZone,Object,o.Directionality,m])],r)}(v),C=function(){function t(t,e,r,o,a){var s=this;this._viewContainerRef=t,this._template=e,this._differs=r,this._viewport=o,this.viewChange=new n.Subject,this.cdkVirtualForTemplateCacheSize=20,this._dataSourceChanges=new n.Subject,this.dataStream=this._dataSourceChanges.pipe(i.startWith(null),i.pairwise(),i.switchMap(function(t){var e=t[0],r=t[1];return s._changeDataSource(e,r)}),i.shareReplay(1)),this._differ=null,this._templateCache=[],this._needsUpdate=!1,this._destroyed=new n.Subject,this.dataStream.subscribe(function(t){s._data=t,s._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(i.takeUntil(this._destroyed)).subscribe(function(t){s._renderedRange=t,a.run(function(){return s.viewChange.next(s._renderedRange)}),s._onRenderedDataChange()}),this._viewport.attach(this)}return Object.defineProperty(t.prototype,"cdkVirtualForOf",{get:function(){return this._cdkVirtualForOf},set:function(t){this._cdkVirtualForOf=t;var e=t instanceof s.DataSource?t:new s.ArrayDataSource(t instanceof n.Observable?t:Array.prototype.slice.call(t||[]));this._dataSourceChanges.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cdkVirtualForTrackBy",{get:function(){return this._cdkVirtualForTrackBy},set:function(t){var e=this;this._needsUpdate=!0,this._cdkVirtualForTrackBy=t?function(r,n){return t(r+(e._renderedRange?e._renderedRange.start:0),n)}:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cdkVirtualForTemplate",{set:function(t){t&&(this._needsUpdate=!0,this._template=t)},enumerable:!0,configurable:!0}),t.prototype.measureRangeSize=function(t,e){if(t.start>=t.end)return 0;if(t.start<this._renderedRange.start||t.end>this._renderedRange.end)throw Error("Error: attempted to measure an item that isn't rendered.");for(var r=t.start-this._renderedRange.start,n=t.end-t.start,i=0,o=n;o--;)for(var a=this._viewContainerRef.get(o+r),s=a?a.rootNodes.length:0;s--;)i+=f(e,a.rootNodes[s]);return i},t.prototype.ngDoCheck=function(){if(this._differ&&this._needsUpdate){var t=this._differ.diff(this._renderedItems);t?this._applyChanges(t):this._updateContext(),this._needsUpdate=!1}},t.prototype.ngOnDestroy=function(){this._viewport.detach(),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete();for(var t=0,e=this._templateCache;t<e.length;t++){e[t].destroy()}},t.prototype._onRenderedDataChange=function(){this._renderedRange&&(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create(this.cdkVirtualForTrackBy)),this._needsUpdate=!0)},t.prototype._changeDataSource=function(t,e){return t&&t.disconnect(this),this._needsUpdate=!0,e.connect(this)},t.prototype._updateContext=function(){for(var t=this._data.length,e=this._viewContainerRef.length;e--;){var r=this._viewContainerRef.get(e);r.context.index=this._renderedRange.start+e,r.context.count=t,this._updateComputedContextProperties(r.context),r.detectChanges()}},t.prototype._applyChanges=function(t){var e=this;t.forEachOperation(function(t,r,n){if(null==t.previousIndex){var i=e._getViewForNewItem();e._viewContainerRef.insert(i,n),i.context.$implicit=t.item}else if(null==n)e._cacheView(e._viewContainerRef.detach(r));else{var i=e._viewContainerRef.get(r);e._viewContainerRef.move(i,n),i.context.$implicit=t.item}}),t.forEachIdentityChange(function(t){e._viewContainerRef.get(t.currentIndex).context.$implicit=t.item});for(var r=this._data.length,n=this._viewContainerRef.length;n--;){var i=this._viewContainerRef.get(n);i.context.index=this._renderedRange.start+n,i.context.count=r,this._updateComputedContextProperties(i.context)}},t.prototype._cacheView=function(t){if(this._templateCache.length<this.cdkVirtualForTemplateCacheSize)this._templateCache.push(t);else{var e=this._viewContainerRef.indexOf(t);-1===e?t.destroy():this._viewContainerRef.remove(e)}},t.prototype._getViewForNewItem=function(){return this._templateCache.pop()||this._viewContainerRef.createEmbeddedView(this._template,{$implicit:null,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1})},t.prototype._updateComputedContextProperties=function(t){t.first=0===t.index,t.last=t.index===t.count-1,t.even=t.index%2==0,t.odd=!t.even},c([e.Input(),u("design:type",Object),u("design:paramtypes",[Object])],t.prototype,"cdkVirtualForOf",null),c([e.Input(),u("design:type",Object),u("design:paramtypes",[Object])],t.prototype,"cdkVirtualForTrackBy",null),c([e.Input(),u("design:type",e.TemplateRef),u("design:paramtypes",[e.TemplateRef])],t.prototype,"cdkVirtualForTemplate",null),c([e.Input(),u("design:type",Number)],t.prototype,"cdkVirtualForTemplateCacheSize",void 0),t=c([e.Directive({selector:"[cdkVirtualFor][cdkVirtualForOf]"}),d(3,e.SkipSelf()),u("design:paramtypes",[e.ViewContainerRef,e.TemplateRef,e.IterableDiffers,b,e.NgZone])],t)}(),R=function(){function t(){}return t=c([e.NgModule({imports:[o.BidiModule,r.PlatformModule],exports:[o.BidiModule,w,v,C,b],declarations:[w,v,C,b]})],t)}(),x=function(){function t(){}return t=c([e.NgModule({imports:[R],exports:[R]})],t)}(),k=function(){function t(t,e){var r=this;this._platform=t,e.runOutsideAngular(function(){r._change=t.isBrowser?n.merge(n.fromEvent(window,"resize"),n.fromEvent(window,"orientationchange")):n.of(),r._invalidateCache=r.change().subscribe(function(){return r._updateViewportSize()})})}return t.prototype.ngOnDestroy=function(){this._invalidateCache.unsubscribe()},t.prototype.getViewportSize=function(){this._viewportSize||this._updateViewportSize();var t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t},t.prototype.getViewportRect=function(){var t=this.getViewportScrollPosition(),e=this.getViewportSize(),r=e.width,n=e.height;return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+r,height:n,width:r}},t.prototype.getViewportScrollPosition=function(){if(!this._platform.isBrowser)return{top:0,left:0};var t=document.documentElement,e=t.getBoundingClientRect();return{top:-e.top||document.body.scrollTop||window.scrollY||document.documentElement.scrollTop||0,left:-e.left||document.body.scrollLeft||window.scrollX||document.documentElement.scrollLeft||0}},t.prototype.change=function(t){return void 0===t&&(t=20),t>0?this._change.pipe(i.auditTime(t)):this._change},t.prototype._updateViewportSize=function(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t(e.inject(r.Platform),e.inject(e.NgZone))},token:t,providedIn:"root"}),t=c([e.Injectable({providedIn:"root"}),u("design:paramtypes",[r.Platform,e.NgZone])],t)}(),O={provide:k,deps:[[new e.Optional,new e.SkipSelf,k],r.Platform,e.NgZone],useFactory:g};t.ɵb=w,t.ɵa=p,t.DEFAULT_SCROLL_TIME=20,t.ScrollDispatcher=m,t.CdkScrollable=v,t.ScrollingModule=R,t.ScrollDispatchModule=x,t.DEFAULT_RESIZE_TIME=20,t.ViewportRuler=k,t.VIEWPORT_RULER_PROVIDER_FACTORY=g,t.VIEWPORT_RULER_PROVIDER=O,t.CdkVirtualForOf=C,t.VIRTUAL_SCROLL_STRATEGY=y,t.CdkVirtualScrollViewport=b,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=cdk-scrolling.umd.min.js.map
