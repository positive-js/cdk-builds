/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@ptsecurity/cdk/collections"),require("rxjs/operators"),require("@angular/core"),require("rxjs"),require("@ptsecurity/cdk/bidi"),require("@angular/common"),require("@ptsecurity/cdk/a11y")):"function"==typeof define&&define.amd?define("@ptsecurity/cdk/tree",["exports","@ptsecurity/cdk/collections","rxjs/operators","@angular/core","rxjs","@ptsecurity/cdk/bidi","@angular/common","@ptsecurity/cdk/a11y"],t):t((e.ng=e.ng||{},e.ng.cdk=e.ng.cdk||{},e.ng.cdk.tree={}),e.ng.cdk.collections,e.rxjs.operators,e.ng.core,e.rxjs,e.ng.cdk.bidi,e.ng.common,e.ng.cdk.a11y)}(this,function(e,t,n,r,o,i,s,d){"use strict";function a(e,t){function n(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function c(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function l(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(){return Error("A valid data source must be provided.")}function h(){return Error("There can only be one default row without a when predicate function.")}function f(){return Error("Could not find a matching node definition for the provided node data.")}function g(){return Error("Could not find a tree control for the tree.")}function _(){return Error("Could not find functions for nested/flat tree in tree control.")}var y=function(e,t){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},v=function(){function e(){this.expansionModel=new t.SelectionModel(!0)}return e.prototype.toggle=function(e){this.expansionModel.toggle(e)},e.prototype.expand=function(e){this.expansionModel.select(e)},e.prototype.collapse=function(e){this.expansionModel.deselect(e)},e.prototype.isExpanded=function(e){return this.expansionModel.isSelected(e)},e.prototype.toggleDescendants=function(e){this.expansionModel.isSelected(e)?this.collapseDescendants(e):this.expandDescendants(e)},e.prototype.collapseAll=function(){this.expansionModel.clear()},e.prototype.expandDescendants=function(e){var t,n=[e];n.push.apply(n,this.getDescendants(e)),(t=this.expansionModel).select.apply(t,n)},e.prototype.collapseDescendants=function(e){var t,n=[e];n.push.apply(n,this.getDescendants(e)),(t=this.expansionModel).deselect.apply(t,n)},e}(),b=function(e){function t(t,n){var r=e.call(this)||this;return r.getLevel=t,r.isExpandable=n,r}return a(t,e),t.prototype.getDescendants=function(e){for(var t=this.dataNodes.indexOf(e),n=[],r=t+1;r<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[r]);r++)n.push(this.dataNodes[r]);return n},t.prototype.expandAll=function(){var e;(e=this.expansionModel).select.apply(e,this.dataNodes)},t}(v),C=function(e){function t(t){var n=e.call(this)||this;return n.getChildren=t,n}return a(t,e),t.prototype.expandAll=function(){var e,t=this;this.expansionModel.clear();var n=this.dataNodes.reduce(function(e,n){return e.concat(t.getDescendants(n),[n])},[]);(e=this.expansionModel).select.apply(e,n)},t.prototype.getDescendants=function(e){var t=[];return this._getDescendants(t,e),t.splice(1)},t.prototype._getDescendants=function(e,t){var r=this;e.push(t),this.getChildren(t).pipe(n.take(1)).subscribe(function(t){t&&t.length>0&&t.forEach(function(t){return r._getDescendants(e,t)})})},t}(v),m=function(){function e(e){this.viewContainer=e}return e=c([r.Directive({selector:"[cdkTreeNodeOutlet]"}),u("design:paramtypes",[r.ViewContainerRef])],e)}(),D=function(){function e(e){this.$implicit=e}return e}(),N=function(){function e(e){this.template=e}return e=c([r.Directive({selector:"[cdkTreeNodeDef]",inputs:["when: cdkTreeNodeDefWhen"]}),u("design:paramtypes",[r.TemplateRef])],e)}(),k=function(){function e(e,n){this._elementRef=e,this._tree=n,this.role="treeitem",this._destroyed=new o.Subject,t.mostRecentTreeNode=this}t=e,Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this._setRoleFromData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isExpanded",{get:function(){return this._tree.treeControl.isExpanded(this._data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):0},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this._destroyed.next(),this._destroyed.complete()},e.prototype.focus=function(){this._elementRef.nativeElement.focus()},e.prototype._setRoleFromData=function(){var e=this;if(this._tree.treeControl.isExpandable)this.role=this._tree.treeControl.isExpandable(this._data)?"group":"treeitem";else{if(!this._tree.treeControl.getChildren)throw _();this._tree.treeControl.getChildren(this._data).pipe(n.takeUntil(this._destroyed)).subscribe(function(t){e.role=t&&t.length?"group":"treeitem"})}};var t;return e.mostRecentTreeNode=null,c([r.Input(),u("design:type",String)],e.prototype,"role",void 0),e=t=c([r.Directive({selector:"cdk-tree-node",exportAs:"cdkTreeNode",host:{"[attr.aria-expanded]":"isExpanded","[attr.aria-level]":'role === "treeitem" ? level : null',"[attr.role]":"role",class:"cdk-tree-node"}}),l(1,r.Inject(r.forwardRef(function(){return x}))),u("design:paramtypes",[r.ElementRef,x])],e)}(),x=function(){function e(e,t){this._differs=e,this._changeDetectorRef=t,this.viewChange=new o.BehaviorSubject({start:0,end:Number.MAX_VALUE}),this._onDestroy=new o.Subject,this._levels=new Map}return Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._dataSource},set:function(e){this._dataSource!==e&&this._switchDataSource(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){if(this._dataDiffer=this._differs.find([]).create(this.trackBy),!this.treeControl)throw g()},e.prototype.ngOnDestroy=function(){this._nodeOutlet.viewContainer.clear(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)},e.prototype.ngAfterContentChecked=function(){var e=this._nodeDefs.filter(function(e){return!e.when});if(e.length>1)throw h();this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()},e.prototype.renderNodeChanges=function(e,t,n,r){var o=this;void 0===t&&(t=this._dataDiffer),void 0===n&&(n=this._nodeOutlet.viewContainer);var i=t.diff(e);i&&(i.forEachOperation(function(t,i,s){if(null==t.previousIndex)o.insertNode(e[s],s,n,r);else if(null==s)n.remove(i),o._levels.delete(t.item);else{var d=n.get(i);n.move(d,s)}}),this._changeDetectorRef.detectChanges())},e.prototype._getNodeDef=function(e,t){if(1===this._nodeDefs.length)return this._nodeDefs.first;var n=this._nodeDefs.find(function(n){return n.when&&n.when(t,e)})||this._defaultNodeDef;if(!n)throw f();return n},e.prototype.insertNode=function(e,t,n,r){var o=this._getNodeDef(e,t),i=new D(e);this.treeControl.getLevel?i.level=this.treeControl.getLevel(e):void 0!==r&&this._levels.has(r)?i.level=this._levels.get(r)+1:i.level=0,this._levels.set(e,i.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(o.template,i,t),k.mostRecentTreeNode&&(k.mostRecentTreeNode.data=e)},e.prototype._observeRenderChanges=function(){var e,t=this;if("function"==typeof this._dataSource.connect?e=this._dataSource.connect(this):this._dataSource instanceof o.Observable?e=this._dataSource:Array.isArray(this._dataSource)&&(e=o.of(this._dataSource)),!e)throw p();this._dataSubscription=e.pipe(n.takeUntil(this._onDestroy)).subscribe(function(e){return t.renderNodeChanges(e)})},e.prototype._switchDataSource=function(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()},c([r.Input(),u("design:type",Object)],e.prototype,"treeControl",void 0),c([r.Input(),u("design:type",Function)],e.prototype,"trackBy",void 0),c([r.ViewChild(m),u("design:type",m)],e.prototype,"_nodeOutlet",void 0),c([r.ContentChildren(N),u("design:type",r.QueryList)],e.prototype,"_nodeDefs",void 0),c([r.Input(),u("design:type",Object),u("design:paramtypes",[Object])],e.prototype,"dataSource",null),e=c([r.Component({selector:"cdk-tree",exportAs:"cdkTree",template:"<ng-container cdkTreeNodeOutlet></ng-container>",host:{class:"cdk-tree",role:"tree"},encapsulation:r.ViewEncapsulation.None,changeDetection:r.ChangeDetectionStrategy.OnPush}),u("design:paramtypes",[r.IterableDiffers,r.ChangeDetectorRef])],e)}(),O=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o._elementRef=t,o._tree=n,o._differs=r,o}a(t,e),o=t,t.prototype.ngAfterContentInit=function(){var e=this;if(this._dataDiffer=this._differs.find([]).create(this._tree.trackBy),!this._tree.treeControl.getChildren)throw _();this._tree.treeControl.getChildren(this.data).pipe(n.takeUntil(this._destroyed)).subscribe(function(t){e._children=t,e.updateChildrenNodes()}),this.nodeOutlet.changes.pipe(n.takeUntil(this._destroyed)).subscribe(function(){return e.updateChildrenNodes()})},t.prototype.ngOnDestroy=function(){this._clear(),e.prototype.ngOnDestroy.call(this)},t.prototype.updateChildrenNodes=function(){this.nodeOutlet.length&&this._children?this._tree.renderNodeChanges(this._children,this._dataDiffer,this.nodeOutlet.first.viewContainer,this._data):this._dataDiffer.diff([])},t.prototype._clear=function(){this.nodeOutlet&&this.nodeOutlet.first&&(this.nodeOutlet.first.viewContainer.clear(),this._dataDiffer.diff([]))};var o;return c([r.ContentChildren(m),u("design:type",r.QueryList)],t.prototype,"nodeOutlet",void 0),t=o=c([r.Directive({selector:"cdk-nested-tree-node",exportAs:"cdkNestedTreeNode",host:{"[attr.aria-expanded]":"isExpanded","[attr.role]":"role",class:"cdk-tree-node cdk-nested-tree-node"},providers:[{provide:k,useExisting:o}]}),u("design:paramtypes",[r.ElementRef,x,r.IterableDiffers])],t)}(k),S=function(){function e(e,t,r,i,s){var d=this;this._treeNode=e,this._tree=t,this._renderer=r,this._element=i,this._dir=s,this._destroyed=new o.Subject,this._dir&&this._dir.change.pipe(n.takeUntil(this._destroyed)).subscribe(function(){return d._setPadding()})}return Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e,this._setPadding()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indent",{get:function(){return this._indent},set:function(e){this._indent=e,this._setPadding()},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this._destroyed.next(),this._destroyed.complete()},e.prototype._paddingIndent=function(){var e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,t=this._level||e;return t?t*this._indent+12+"px":"12px"},e.prototype._setPadding=function(){var e=this._paddingIndent(),t=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft";this._renderer.setStyle(this._element.nativeElement,t,e)},c([r.Input("cdkTreeNodePadding"),u("design:type",Number),u("design:paramtypes",[Number])],e.prototype,"level",null),c([r.Input("cdkTreeNodePaddingIndent"),u("design:type",Number),u("design:paramtypes",[Number])],e.prototype,"indent",null),e=c([r.Directive({selector:"[cdkTreeNodePadding]"}),l(4,r.Optional()),u("design:paramtypes",[k,x,r.Renderer2,r.ElementRef,i.Directionality])],e)}(),w=function(){function e(e,t){this._tree=e,this._treeNode=t,this._recursive=!1}return Object.defineProperty(e.prototype,"recursive",{get:function(){return this._recursive},set:function(e){this._recursive=e},enumerable:!0,configurable:!0}),e.prototype._toggle=function(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()},c([r.Input("cdkTreeNodeToggleRecursive"),u("design:type",Boolean),u("design:paramtypes",[Boolean])],e.prototype,"recursive",null),e=c([r.Directive({selector:"[cdkTreeNodeToggle]",host:{"(click)":"_toggle($event)"}}),u("design:paramtypes",[x,k])],e)}(),T=[O,N,S,w,x,k,m],R=function(){function e(){}return e=c([r.NgModule({imports:[s.CommonModule],exports:T,declarations:T,providers:[d.FocusMonitor,N]})],e)}();e.BaseTreeControl=v,e.FlatTreeControl=b,e.NestedTreeControl=C,e.CdkNestedTreeNode=O,e.CdkTreeNodeOutletContext=D,e.CdkTreeNodeDef=N,e.CdkTreeNodePadding=S,e.CdkTreeNodeOutlet=m,e.CdkTreeNode=k,e.CdkTree=x,e.getTreeNoValidDataSourceError=p,e.getTreeMultipleDefaultNodeDefsError=h,e.getTreeMissingMatchingNodeDefError=f,e.getTreeControlMissingError=g,e.getTreeControlFunctionsMissingError=_,e.CdkTreeModule=R,e.CdkTreeNodeToggle=w,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=cdk-tree.umd.min.js.map
