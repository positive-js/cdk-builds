!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs/operators/debounceTime"),require("rxjs/operators/filter"),require("rxjs/operators/map"),require("rxjs/operators/tap"),require("rxjs/Subject"),require("rxjs/Subscription"),require("@ptsecurity/cdk/keycodes"),require("@ptsecurity/cdk/platform"),require("@angular/core"),require("rxjs/observable/of"),require("@angular/common")):"function"==typeof define&&define.amd?define("@ptsecurity/cdk/a11y",["exports","rxjs/operators/debounceTime","rxjs/operators/filter","rxjs/operators/map","rxjs/operators/tap","rxjs/Subject","rxjs/Subscription","@ptsecurity/cdk/keycodes","@ptsecurity/cdk/platform","@angular/core","rxjs/observable/of","@angular/common"],e):e((t.ng=t.ng||{},t.ng.cdk=t.ng.cdk||{},t.ng.cdk.a11y={}),t.Rx.operators,t.Rx.operators,t.Rx.operators,t.Rx.operators,t.Rx,t.Rx,t.ng.cdk.keycodes,t.ng.cdk.platform,t.ng.core,t.Rx.Observable,t.ng.common)}(this,function(t,e,i,n,o,r,s,c,u,a,h,p){"use strict";function l(t,e){function i(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function d(t,e,i){return t||new g(e,i)}var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},_=function(){function t(t){var e=this;this._items=t,this._activeItemIndex=-1,this._wrap=!1,this._letterKeyStream=new r.Subject,this._typeaheadSubscription=s.Subscription.EMPTY,this._vertical=!0,this._pressedLetters=[],this.tabOut=new r.Subject,this.change=new r.Subject,t.changes.subscribe(function(t){if(e._activeItem){var i=t.toArray(),n=i.indexOf(e._activeItem);n>-1&&n!==e._activeItemIndex&&(e._activeItemIndex=n)}})}return t.prototype.withWrap=function(){return this._wrap=!0,this},t.prototype.withVerticalOrientation=function(t){return void 0===t&&(t=!0),this._vertical=t,this},t.prototype.withHorizontalOrientation=function(t){return this._horizontal=t,this},t.prototype.withTypeAhead=function(t){var r=this;if(void 0===t&&(t=200),this._items.length&&this._items.some(function(t){return"function"!=typeof t.getLabel}))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(o.tap(function(t){return r._pressedLetters.push(t)}),e.debounceTime(t),i.filter(function(){return r._pressedLetters.length>0}),n.map(function(){return r._pressedLetters.join("")})).subscribe(function(t){for(var e=r._items.toArray(),i=1;i<e.length+1;i++){var n=(r._activeItemIndex+i)%e.length,o=e[n];if(!o.disabled&&0===o.getLabel().toUpperCase().trim().indexOf(t)){r.setActiveItem(n);break}}r._pressedLetters=[]}),this},t.prototype.setActiveItem=function(t){var e=this._activeItemIndex;this._activeItemIndex=t,this._activeItem=this._items.toArray()[t],this._activeItemIndex!==e&&this.change.next(t)},t.prototype.onKeydown=function(t){var e=t.keyCode;switch(e){case c.TAB:return void this.tabOut.next();case c.DOWN_ARROW:if(this._vertical){this.setNextItemActive();break}case c.UP_ARROW:if(this._vertical){this.setPreviousItemActive();break}case c.RIGHT_ARROW:if("ltr"===this._horizontal){this.setNextItemActive();break}if("rtl"===this._horizontal){this.setPreviousItemActive();break}case c.LEFT_ARROW:if("ltr"===this._horizontal){this.setPreviousItemActive();break}if("rtl"===this._horizontal){this.setNextItemActive();break}default:return void(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=c.A&&e<=c.Z||e>=c.ZERO&&e<=c.NINE)&&this._letterKeyStream.next(String.fromCharCode(e)))}this._pressedLetters=[],t.preventDefault()},Object.defineProperty(t.prototype,"activeItemIndex",{get:function(){return this._activeItemIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeItem",{get:function(){return this._activeItem},enumerable:!0,configurable:!0}),t.prototype.setFirstItemActive=function(){this._setActiveItemByIndex(0,1)},t.prototype.setLastItemActive=function(){this._setActiveItemByIndex(this._items.length-1,-1)},t.prototype.setNextItemActive=function(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)},t.prototype.setPreviousItemActive=function(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)},t.prototype.updateActiveItemIndex=function(t){this._activeItemIndex=t},t.prototype._setActiveItemByDelta=function(t,e){void 0===e&&(e=this._items.toArray()),this._wrap?this._setActiveInWrapMode(t,e):this._setActiveInDefaultMode(t,e)},t.prototype._setActiveInWrapMode=function(t,e){this._activeItemIndex=(this._activeItemIndex+t+e.length)%e.length,e[this._activeItemIndex].disabled?this._setActiveInWrapMode(t,e):this.setActiveItem(this._activeItemIndex)},t.prototype._setActiveInDefaultMode=function(t,e){this._setActiveItemByIndex(this._activeItemIndex+t,t,e)},t.prototype._setActiveItemByIndex=function(t,e,i){if(void 0===i&&(i=this._items.toArray()),i[t]){for(;i[t].disabled;)if(t+=e,!i[t])return;this.setActiveItem(t)}},t}(),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.setActiveItem=function(e){this.activeItem&&this.activeItem.setInactiveStyles(),t.prototype.setActiveItem.call(this,e),this.activeItem&&this.activeItem.setActiveStyles()},e}(_),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._origin="program",e}return l(e,t),e.prototype.setFocusOrigin=function(t){return this._origin=t,this},e.prototype.setActiveItem=function(e){t.prototype.setActiveItem.call(this,e),this.activeItem&&this.activeItem.focus(this._origin)},e}(_),g=function(){function t(t,e){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._unregisterGlobalListeners=function(){},this._monitoredElementCount=0}return t.prototype.monitor=function(t,e,i){var n=this;if(e instanceof a.Renderer2||(i=e),i=!!i,!this._platform.isBrowser)return h.of(null);if(this._elementInfo.has(t)){var o=this._elementInfo.get(t);return o.checkChildren=i,o.subject.asObservable()}var s={unlisten:function(){},checkChildren:i,subject:new r.Subject};this._elementInfo.set(t,s),this._incrementMonitoredElementCount();var c=function(e){return n._onFocus(e,t)},u=function(e){return n._onBlur(e,t)};return this._ngZone.runOutsideAngular(function(){t.addEventListener("focus",c,!0),t.addEventListener("blur",u,!0)}),s.unlisten=function(){t.removeEventListener("focus",c,!0),t.removeEventListener("blur",u,!0)},s.subject.asObservable()},t.prototype.stopMonitoring=function(t){var e=this._elementInfo.get(t);e&&(e.unlisten(),e.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._decrementMonitoredElementCount())},t.prototype.focusVia=function(t,e){this._setOriginForCurrentEventQueue(e),t.focus()},t.prototype.ngOnDestroy=function(){var t=this;this._elementInfo.forEach(function(e,i){return t.stopMonitoring(i)})},t.prototype._registerGlobalListeners=function(){var t=this;if(this._platform.isBrowser){var e=function(){t._lastTouchTarget=null,t._setOriginForCurrentEventQueue("keyboard")},i=function(){t._lastTouchTarget||t._setOriginForCurrentEventQueue("mouse")},n=function(e){null!=t._touchTimeoutId&&clearTimeout(t._touchTimeoutId),t._lastTouchTarget=e.target,t._touchTimeoutId=setTimeout(function(){return t._lastTouchTarget=null},650)},o=function(){t._windowFocused=!0,t._windowFocusTimeoutId=setTimeout(function(){return t._windowFocused=!1},0)};this._ngZone.runOutsideAngular(function(){document.addEventListener("keydown",e,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("touchstart",n,!u.supportsPassiveEventListeners()||{passive:!0,capture:!0}),window.addEventListener("focus",o)}),this._unregisterGlobalListeners=function(){document.removeEventListener("keydown",e,!0),document.removeEventListener("mousedown",i,!0),document.removeEventListener("touchstart",n,!u.supportsPassiveEventListeners()||{passive:!0,capture:!0}),window.removeEventListener("focus",o),clearTimeout(t._windowFocusTimeoutId),clearTimeout(t._touchTimeoutId),clearTimeout(t._originTimeoutId)}}},t.prototype._toggleClass=function(t,e,i){i?t.classList.add(e):t.classList.remove(e)},t.prototype._setClasses=function(t,e){this._elementInfo.get(t)&&(this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e))},t.prototype._setOriginForCurrentEventQueue=function(t){var e=this;this._origin=t,this._originTimeoutId=setTimeout(function(){return e._origin=null},0)},t.prototype._wasCausedByTouch=function(t){var e=t.target;return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))},t.prototype._onFocus=function(t,e){var i=this._elementInfo.get(e);i&&(i.checkChildren||e===t.target)&&(this._origin||(this._windowFocused&&this._lastFocusOrigin?this._origin=this._lastFocusOrigin:this._wasCausedByTouch(t)?this._origin="touch":this._origin="program"),this._setClasses(e,this._origin),i.subject.next(this._origin),this._lastFocusOrigin=this._origin,this._origin=null)},t.prototype._onBlur=function(t,e){var i=this._elementInfo.get(e);!i||i.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),i.subject.next(null))},t.prototype._incrementMonitoredElementCount=function(){1==++this._monitoredElementCount&&this._registerGlobalListeners()},t.prototype._decrementMonitoredElementCount=function(){--this._monitoredElementCount||(this._unregisterGlobalListeners(),this._unregisterGlobalListeners=function(){})},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:a.NgZone},{type:u.Platform}]},t}(),y=function(){function t(t,e){var i=this;this._elementRef=t,this._focusMonitor=e,this.cdkFocusChange=new a.EventEmitter,this._monitorSubscription=this._focusMonitor.monitor(this._elementRef.nativeElement,this._elementRef.nativeElement.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(function(t){return i.cdkFocusChange.emit(t)})}return t.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._elementRef.nativeElement),this._monitorSubscription.unsubscribe()},t.decorators=[{type:a.Directive,args:[{selector:"[cdkMonitorElementFocus], [cdkMonitorSubtreeFocus]"}]}],t.ctorParameters=function(){return[{type:a.ElementRef},{type:g}]},t.propDecorators={cdkFocusChange:[{type:a.Output}]},t}(),I={provide:g,deps:[[new a.Optional,new a.SkipSelf,g],a.NgZone,u.Platform],useFactory:d},b=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{imports:[p.CommonModule],declarations:[y],exports:[y],providers:[I]}]}],t.ctorParameters=function(){return[]},t}();t.ActiveDescendantKeyManager=f,t.FocusKeyManager=v,t.ListKeyManager=_,t.TOUCH_BUFFER_MS=650,t.FocusMonitor=g,t.CdkMonitorFocus=y,t.FOCUS_MONITOR_PROVIDER_FACTORY=d,t.FOCUS_MONITOR_PROVIDER=I,t.A11yModule=b,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=cdk-a11y.umd.min.js.map
