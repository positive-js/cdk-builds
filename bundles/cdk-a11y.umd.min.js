!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs"),require("rxjs/operators"),require("@ptsecurity/cdk/keycodes"),require("@angular/core"),require("@ptsecurity/cdk/platform"),require("@angular/common")):"function"==typeof define&&define.amd?define("@ptsecurity/cdk/a11y",["exports","rxjs","rxjs/operators","@ptsecurity/cdk/keycodes","@angular/core","@ptsecurity/cdk/platform","@angular/common"],e):e((t.ng=t.ng||{},t.ng.cdk=t.ng.cdk||{},t.ng.cdk.a11y={}),t.Rx,t.Rx.operators,t.ng.cdk.keycodes,t.ng.core,t.ng.cdk.platform,t.ng.common)}(this,function(t,e,i,n,o,s,r){"use strict";function c(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function u(t,e,i){return t||new m(e,i)}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},h=function(){function t(t){var i=this;this._items=t,this.tabOut=new e.Subject,this.change=new e.Subject,this._activeItemIndex=-1,this._wrap=!1,this._scrollSize=0,this._letterKeyStream=new e.Subject,this._typeaheadSubscription=e.Subscription.EMPTY,this._vertical=!0,this._pressedLetters=[],t.changes.subscribe(function(t){if(i._activeItem){var e=t.toArray(),n=e.indexOf(i._activeItem);n>-1&&n!==i._activeItemIndex&&(i._activeItemIndex=n)}})}return t.prototype.withWrap=function(){return this._wrap=!0,this},t.prototype.setScrollSize=function(t){return this._scrollSize=t,this},t.prototype.withVerticalOrientation=function(t){return void 0===t&&(t=!0),this._vertical=t,this},t.prototype.withHorizontalOrientation=function(t){return this._horizontal=t,this},t.prototype.withTypeAhead=function(t){var e=this;if(void 0===t&&(t=200),this._items.length&&this._items.some(function(t){return"function"!=typeof t.getLabel}))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(i.tap(function(t){return e._pressedLetters.push(t)}),i.debounceTime(t),i.filter(function(){return e._pressedLetters.length>0}),i.map(function(){return e._pressedLetters.join("")})).subscribe(function(t){for(var i=e._items.toArray(),n=1;n<i.length+1;n++){var o=(e._activeItemIndex+n)%i.length,s=i[o];if(!s.disabled&&0===s.getLabel().toUpperCase().trim().indexOf(t)){e.setActiveItem(o);break}}e._pressedLetters=[]}),this},t.prototype.setActiveItem=function(t){var e=this._activeItemIndex;this._activeItemIndex=t,this._activeItem=this._items.toArray()[t],this._activeItemIndex!==e&&this.change.next(t)},t.prototype.onKeydown=function(t){var e=t.keyCode;switch(e){case n.TAB:return void this.tabOut.next();case n.DOWN_ARROW:if(this._vertical){this.setNextItemActive();break}return;case n.UP_ARROW:if(this._vertical){this.setPreviousItemActive();break}return;case n.RIGHT_ARROW:if("ltr"===this._horizontal){this.setNextItemActive();break}if("rtl"===this._horizontal){this.setPreviousItemActive();break}return;case n.LEFT_ARROW:if("ltr"===this._horizontal){this.setPreviousItemActive();break}if("rtl"===this._horizontal){this.setNextItemActive();break}return;default:return void(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=n.A&&e<=n.Z||e>=n.ZERO&&e<=n.NINE)&&this._letterKeyStream.next(String.fromCharCode(e)))}this._pressedLetters=[],t.preventDefault()},Object.defineProperty(t.prototype,"activeItemIndex",{get:function(){return this._activeItemIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeItem",{get:function(){return this._activeItem},enumerable:!0,configurable:!0}),t.prototype.setFirstItemActive=function(){this._setActiveItemByIndex(0,1)},t.prototype.setLastItemActive=function(){this._setActiveItemByIndex(this._items.length-1,-1)},t.prototype.setNextItemActive=function(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)},t.prototype.setPreviousItemActive=function(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)},t.prototype.setNextPageItemActive=function(){this._activeItemIndex+this._scrollSize>=this._items.length?this.setLastItemActive():this._setActiveItemByDelta(this._scrollSize)},t.prototype.setPreviousPageItemActive=function(){this._activeItemIndex-this._scrollSize<=0?this.setFirstItemActive():this._setActiveItemByDelta(-this._scrollSize)},t.prototype.updateActiveItemIndex=function(t){this._activeItemIndex=t},t.prototype._setActiveItemByDelta=function(t,e){void 0===e&&(e=this._items.toArray()),this._wrap?this._setActiveInWrapMode(t,e):this._setActiveInDefaultMode(t,e)},t.prototype._setActiveInWrapMode=function(t,e){this._activeItemIndex=(this._activeItemIndex+t+e.length)%e.length,e[this._activeItemIndex].disabled?this._setActiveInWrapMode(t,e):this.setActiveItem(this._activeItemIndex)},t.prototype._setActiveInDefaultMode=function(t,e){this._setActiveItemByIndex(this._activeItemIndex+t,t,e)},t.prototype._setActiveItemByIndex=function(t,e,i){void 0===i&&(i=this._items.toArray());var n=t;if(i[n]){for(;i[n].disabled;)if(n+=e,!i[n])return;this.setActiveItem(n)}},t}(),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.setActiveItem=function(e){this.activeItem&&this.activeItem.setInactiveStyles(),t.prototype.setActiveItem.call(this,e),this.activeItem&&this.activeItem.setActiveStyles()},e}(h),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._origin="program",e}return c(e,t),e.prototype.setFocusOrigin=function(t){return this._origin=t,this},e.prototype.setActiveItem=function(e){t.prototype.setActiveItem.call(this,e),this.activeItem&&this.activeItem.focus(this._origin)},e}(h),m=function(){function t(t,e){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._unregisterGlobalListeners=function(){},this._monitoredElementCount=0}return t.prototype.monitor=function(t,i,n){var s=this;if(i instanceof o.Renderer2||(n=i),n=!!n,!this._platform.isBrowser)return e.of(null);if(this._elementInfo.has(t)){var r=this._elementInfo.get(t);return r.checkChildren=n,r.subject.asObservable()}var c={unlisten:function(){},checkChildren:n,subject:new e.Subject};this._elementInfo.set(t,c),this._incrementMonitoredElementCount();var u=function(e){return s._onFocus(e,t)},a=function(e){return s._onBlur(e,t)};return this._ngZone.runOutsideAngular(function(){t.addEventListener("focus",u,!0),t.addEventListener("blur",a,!0)}),c.unlisten=function(){t.removeEventListener("focus",u,!0),t.removeEventListener("blur",a,!0)},c.subject.asObservable()},t.prototype.stopMonitoring=function(t){var e=this._elementInfo.get(t);e&&(e.unlisten(),e.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._decrementMonitoredElementCount())},t.prototype.focusVia=function(t,e){this._setOriginForCurrentEventQueue(e),t.focus()},t.prototype.ngOnDestroy=function(){var t=this;this._elementInfo.forEach(function(e,i){return t.stopMonitoring(i)})},t.prototype._registerGlobalListeners=function(){var t=this;if(this._platform.isBrowser){var e=function(){t._lastTouchTarget=null,t._setOriginForCurrentEventQueue("keyboard")},i=function(){t._lastTouchTarget||t._setOriginForCurrentEventQueue("mouse")},n=function(e){null!=t._touchTimeoutId&&clearTimeout(t._touchTimeoutId),t._lastTouchTarget=e.target,t._touchTimeoutId=setTimeout(function(){return t._lastTouchTarget=null},650)},o=function(){t._windowFocused=!0,t._windowFocusTimeoutId=setTimeout(function(){return t._windowFocused=!1},0)};this._ngZone.runOutsideAngular(function(){document.addEventListener("keydown",e,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("touchstart",n,!s.supportsPassiveEventListeners()||{passive:!0,capture:!0}),window.addEventListener("focus",o)}),this._unregisterGlobalListeners=function(){document.removeEventListener("keydown",e,!0),document.removeEventListener("mousedown",i,!0),document.removeEventListener("touchstart",n,!s.supportsPassiveEventListeners()||{passive:!0,capture:!0}),window.removeEventListener("focus",o),clearTimeout(t._windowFocusTimeoutId),clearTimeout(t._touchTimeoutId),clearTimeout(t._originTimeoutId)}}},t.prototype._toggleClass=function(t,e,i){i?t.classList.add(e):t.classList.remove(e)},t.prototype._setClasses=function(t,e){this._elementInfo.get(t)&&(this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e))},t.prototype._setOriginForCurrentEventQueue=function(t){var e=this;this._origin=t,this._originTimeoutId=setTimeout(function(){return e._origin=null},0)},t.prototype._wasCausedByTouch=function(t){var e=t.target;return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))},t.prototype._onFocus=function(t,e){var i=this._elementInfo.get(e);i&&(i.checkChildren||e===t.target)&&(this._origin||(this._windowFocused&&this._lastFocusOrigin?this._origin=this._lastFocusOrigin:this._wasCausedByTouch(t)?this._origin="touch":this._origin="program"),this._setClasses(e,this._origin),i.subject.next(this._origin),this._lastFocusOrigin=this._origin,this._origin=null)},t.prototype._onBlur=function(t,e){var i=this._elementInfo.get(e);!i||i.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),i.subject.next(null))},t.prototype._incrementMonitoredElementCount=function(){1==++this._monitoredElementCount&&this._registerGlobalListeners()},t.prototype._decrementMonitoredElementCount=function(){--this._monitoredElementCount||(this._unregisterGlobalListeners(),this._unregisterGlobalListeners=function(){})},t.decorators=[{type:o.Injectable}],t.ctorParameters=function(){return[{type:o.NgZone},{type:s.Platform}]},t}(),p=function(){function t(t,e){var i=this;this._elementRef=t,this._focusMonitor=e,this.cdkFocusChange=new o.EventEmitter,this._monitorSubscription=this._focusMonitor.monitor(this._elementRef.nativeElement,this._elementRef.nativeElement.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(function(t){return i.cdkFocusChange.emit(t)})}return t.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._elementRef.nativeElement),this._monitorSubscription.unsubscribe()},t.decorators=[{type:o.Directive,args:[{selector:"[cdkMonitorElementFocus], [cdkMonitorSubtreeFocus]"}]}],t.ctorParameters=function(){return[{type:o.ElementRef},{type:m}]},t.propDecorators={cdkFocusChange:[{type:o.Output}]},t}(),d={provide:m,deps:[[new o.Optional,new o.SkipSelf,m],o.NgZone,s.Platform],useFactory:u},f=function(){function t(){}return t.decorators=[{type:o.NgModule,args:[{imports:[r.CommonModule,s.PlatformModule],declarations:[p],exports:[p],providers:[d]}]}],t}();t.ActiveDescendantKeyManager=l,t.FocusKeyManager=_,t.ListKeyManager=h,t.TOUCH_BUFFER_MS=650,t.FocusMonitor=m,t.CdkMonitorFocus=p,t.FOCUS_MONITOR_PROVIDER_FACTORY=u,t.FOCUS_MONITOR_PROVIDER=d,t.A11yModule=f,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=cdk-a11y.umd.min.js.map
