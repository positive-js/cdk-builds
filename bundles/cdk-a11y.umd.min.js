!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@ptsecurity/cdk/keycodes"),require("@ptsecurity/cdk/platform"),require("@angular/common")):"function"==typeof define&&define.amd?define("@ptsecurity/cdk/a11y",["exports","@angular/core","rxjs","rxjs/operators","@ptsecurity/cdk/keycodes","@ptsecurity/cdk/platform","@angular/common"],e):e((t.ng=t.ng||{},t.ng.cdk=t.ng.cdk||{},t.ng.cdk.a11y={}),t.ng.core,t.rxjs,t.rxjs.operators,t.ng.cdk.keycodes,t.ng.cdk.platform,t.ng.common)}(this,function(t,e,i,n,o,r,s){"use strict";function c(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function u(t,e,i){return t||new l(e,i)}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},h=function(){function t(t){var n=this;this._items=t,this.tabOut=new i.Subject,this.change=new i.Subject,this._activeItemIndex=-1,this._wrap=!1,this._letterKeyStream=new i.Subject,this._typeaheadSubscription=i.Subscription.EMPTY,this._vertical=!0,this._skipPredicateFn=function(t){return t.disabled},this._pressedLetters=[],t instanceof e.QueryList&&t.changes.subscribe(function(t){if(n._activeItem){var e=t.toArray(),i=e.indexOf(n._activeItem);i>-1&&i!==n._activeItemIndex&&(n._activeItemIndex=i)}})}return t.prototype.withWrap=function(){return this._wrap=!0,this},t.prototype.withVerticalOrientation=function(t){return void 0===t&&(t=!0),this._vertical=t,this},t.prototype.withHorizontalOrientation=function(t){return this._horizontal=t,this},t.prototype.withTypeAhead=function(t){var e=this;if(void 0===t&&(t=200),this._items.length&&this._items.some(function(t){return"function"!=typeof t.getLabel}))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(n.tap(function(t){return e._pressedLetters.push(t)}),n.debounceTime(t),n.filter(function(){return e._pressedLetters.length>0}),n.map(function(){return e._pressedLetters.join("")})).subscribe(function(t){for(var i=e._items.toArray(),n=1;n<i.length+1;n++){var o=(e._activeItemIndex+n)%i.length,r=i[o];if(!r.disabled&&0===r.getLabel().toUpperCase().trim().indexOf(t)){e.setActiveItem(o);break}}e._pressedLetters=[]}),this},t.prototype.setActiveItem=function(t){var e=this._activeItemIndex;this._activeItemIndex=t,this._activeItem=this._items.toArray()[t],this._activeItemIndex!==e&&this.change.next(t)},t.prototype.onKeydown=function(t){var e=t.keyCode;switch(e){case o.TAB:return void this.tabOut.next();case o.DOWN_ARROW:if(this._vertical){this.setNextItemActive();break}return;case o.UP_ARROW:if(this._vertical){this.setPreviousItemActive();break}return;case o.RIGHT_ARROW:if("ltr"===this._horizontal){this.setNextItemActive();break}if("rtl"===this._horizontal){this.setPreviousItemActive();break}return;case o.LEFT_ARROW:if("ltr"===this._horizontal){this.setPreviousItemActive();break}if("rtl"===this._horizontal){this.setNextItemActive();break}return;default:return void(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=o.A&&e<=o.Z||e>=o.ZERO&&e<=o.NINE)&&this._letterKeyStream.next(String.fromCharCode(e)))}this._pressedLetters=[],t.preventDefault()},Object.defineProperty(t.prototype,"activeItemIndex",{get:function(){return this._activeItemIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeItem",{get:function(){return this._activeItem},enumerable:!0,configurable:!0}),t.prototype.setFirstItemActive=function(){this._setActiveItemByIndex(0,1)},t.prototype.setLastItemActive=function(){this._setActiveItemByIndex(this._items.length-1,-1)},t.prototype.setNextItemActive=function(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)},t.prototype.setPreviousItemActive=function(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)},t.prototype.setNextPageItemActive=function(t){this._activeItemIndex+t>=this._items.length?this.setLastItemActive():this._setActiveItemByDelta(1)},t.prototype.setPreviousPageItemActive=function(t){this._activeItemIndex-t<=0?this.setFirstItemActive():this._setActiveItemByDelta(-1)},t.prototype.updateActiveItem=function(t){var e=this._getItemsArray(),i="number"==typeof t?t:e.indexOf(t);this._activeItemIndex=i,this._activeItem=e[i]},t.prototype.updateActiveItemIndex=function(t){this.updateActiveItem(t)},t.prototype._setActiveItemByDelta=function(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)},t.prototype._setActiveInWrapMode=function(t){for(var e=this._getItemsArray(),i=1;i<=e.length;i++){var n=(this._activeItemIndex+t*i+e.length)%e.length,o=e[n];if(!this._skipPredicateFn(o))return void this.setActiveItem(n)}},t.prototype._setActiveInDefaultMode=function(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)},t.prototype._setActiveItemByIndex=function(t,e){var i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(t+=e,!i[t])return;this.setActiveItem(t)}},t.prototype._getItemsArray=function(){return this._items instanceof e.QueryList?this._items.toArray():this._items},t}(),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.setActiveItem=function(e){this.activeItem&&this.activeItem.setInactiveStyles(),t.prototype.setActiveItem.call(this,e),this.activeItem&&this.activeItem.setActiveStyles()},e}(h),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._origin="program",e}return c(e,t),e.prototype.setFocusOrigin=function(t){return this._origin=t,this},e.prototype.setActiveItem=function(e){t.prototype.setActiveItem.call(this,e),this.activeItem&&this.activeItem.focus(this._origin)},e}(h),l=function(){function t(t,e){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._unregisterGlobalListeners=function(){},this._monitoredElementCount=0}return t.prototype.monitor=function(t,e){var n=this;if(void 0===e&&(e=!1),!this._platform.isBrowser)return i.of(null);if(this._elementInfo.has(t)){var o=this._elementInfo.get(t);return o.checkChildren=e,o.subject.asObservable()}var r={unlisten:function(){},checkChildren:e,subject:new i.Subject};this._elementInfo.set(t,r),this._incrementMonitoredElementCount();var s=function(e){return n._onFocus(e,t)},c=function(e){return n._onBlur(e,t)};return this._ngZone.runOutsideAngular(function(){t.addEventListener("focus",s,!0),t.addEventListener("blur",c,!0)}),r.unlisten=function(){t.removeEventListener("focus",s,!0),t.removeEventListener("blur",c,!0)},r.subject.asObservable()},t.prototype.stopMonitoring=function(t){var e=this._elementInfo.get(t);e&&(e.unlisten(),e.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._decrementMonitoredElementCount())},t.prototype.focusVia=function(t,e){this._setOriginForCurrentEventQueue(e),"function"==typeof t.focus&&t.focus()},t.prototype.ngOnDestroy=function(){var t=this;this._elementInfo.forEach(function(e,i){return t.stopMonitoring(i)})},t.prototype._registerGlobalListeners=function(){var t=this;if(this._platform.isBrowser){var e=function(){t._lastTouchTarget=null,t._setOriginForCurrentEventQueue("keyboard")},i=function(){t._lastTouchTarget||t._setOriginForCurrentEventQueue("mouse")},n=function(e){null!=t._touchTimeoutId&&clearTimeout(t._touchTimeoutId),t._lastTouchTarget=e.target,t._touchTimeoutId=window.setTimeout(function(){return t._lastTouchTarget=null},650)},o=function(){t._windowFocused=!0,t._windowFocusTimeoutId=window.setTimeout(function(){return t._windowFocused=!1},0)};this._ngZone.runOutsideAngular(function(){document.addEventListener("keydown",e,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("touchstart",n,!r.supportsPassiveEventListeners()||{passive:!0,capture:!0}),window.addEventListener("focus",o)}),this._unregisterGlobalListeners=function(){document.removeEventListener("keydown",e,!0),document.removeEventListener("mousedown",i,!0),document.removeEventListener("touchstart",n,!r.supportsPassiveEventListeners()||{passive:!0,capture:!0}),window.removeEventListener("focus",o),clearTimeout(t._windowFocusTimeoutId),clearTimeout(t._touchTimeoutId),clearTimeout(t._originTimeoutId)}}},t.prototype._toggleClass=function(t,e,i){i?t.classList.add(e):t.classList.remove(e)},t.prototype._setClasses=function(t,e){this._elementInfo.get(t)&&(this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e))},t.prototype._setOriginForCurrentEventQueue=function(t){var e=this;this._ngZone.runOutsideAngular(function(){e._origin=t,e._originTimeoutId=window.setTimeout(function(){return e._origin=null})})},t.prototype._wasCausedByTouch=function(t){var e=t.target;return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))},t.prototype._onFocus=function(t,e){var i=this._elementInfo.get(e);if(i&&(i.checkChildren||e===t.target)){var n=this._origin;n||(n=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"),this._setClasses(e,n),this._emitOrigin(i.subject,n),this._lastFocusOrigin=n}},t.prototype._onBlur=function(t,e){var i=this._elementInfo.get(e);!i||i.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),i.subject.next(null))},t.prototype._emitOrigin=function(t,e){this._ngZone.run(function(){return t.next(e)})},t.prototype._incrementMonitoredElementCount=function(){1==++this._monitoredElementCount&&this._registerGlobalListeners()},t.prototype._decrementMonitoredElementCount=function(){--this._monitoredElementCount||(this._unregisterGlobalListeners(),this._unregisterGlobalListeners=function(){})},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:e.NgZone},{type:r.Platform}]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t(e.inject(e.NgZone),e.inject(r.Platform))},token:t,providedIn:"root"}),t}(),d=function(){function t(t,i){var n=this;this._elementRef=t,this._focusMonitor=i,this.cdkFocusChange=new e.EventEmitter,this._monitorSubscription=this._focusMonitor.monitor(this._elementRef.nativeElement,this._elementRef.nativeElement.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(function(t){return n.cdkFocusChange.emit(t)})}return t.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._elementRef.nativeElement),this._monitorSubscription.unsubscribe()},t.decorators=[{type:e.Directive,args:[{selector:"[cdkMonitorElementFocus], [cdkMonitorSubtreeFocus]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:l}]},t.propDecorators={cdkFocusChange:[{type:e.Output}]},t}(),f={provide:l,deps:[[new e.Optional,new e.SkipSelf,l],e.NgZone,r.Platform],useFactory:u},_=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[s.CommonModule,r.PlatformModule],declarations:[d],exports:[d],providers:[f]}]}],t}();t.ActiveDescendantKeyManager=p,t.FocusKeyManager=m,t.ListKeyManager=h,t.TOUCH_BUFFER_MS=650,t.FocusMonitor=l,t.CdkMonitorFocus=d,t.FOCUS_MONITOR_PROVIDER_FACTORY=u,t.FOCUS_MONITOR_PROVIDER=f,t.A11yModule=_,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=cdk-a11y.umd.min.js.map
