/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@ptsecurity/cdk/keycodes"),require("rxjs"),require("rxjs/operators"),require("@angular/cdk/platform"),require("@angular/common")):"function"==typeof define&&define.amd?define("@ptsecurity/cdk/a11y",["exports","@angular/core","@ptsecurity/cdk/keycodes","rxjs","rxjs/operators","@angular/cdk/platform","@angular/common"],t):(e=e||self,t((e.ng=e.ng||{},e.ng.cdk=e.ng.cdk||{},e.ng.cdk.a11y={}),e.ng.core,e.ng.cdk.keycodes,e.rxjs,e.rxjs.operators,e.ng.cdk.platform,e.ng.common))}(this,function(e,t,i,n,r,o,s){"use strict";function c(e,t){function i(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function u(e,t,i){return e||new v(t,i)}function a(e,t,i){var n=h(e,t);n.some(function(e){return e.trim()===i.trim()})||(n.push(i.trim()),e.setAttribute(t,n.join(I)))}function d(e,t,i){var n=h(e,t),r=n.filter(function(e){return e!==i.trim()});e.setAttribute(t,r.join(I))}function h(e,t){return(e.getAttribute(t)||"").match(/\S+/g)||[]}var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},m=function(){function e(e){var i=this;this._items=e,this.tabOut=new n.Subject,this.change=new n.Subject,this.previousActiveItemIndex=-1,this._activeItemIndex=-1,this.wrap=!1,this.letterKeyStream=new n.Subject,this.typeaheadSubscription=n.Subscription.EMPTY,this.vertical=!0,this.scrollSize=0,this.pressedLetters=[],this.skipPredicateFn=function(e){return e.disabled},e instanceof t.QueryList&&e.changes.subscribe(function(e){if(i._activeItem){var t=e.toArray(),n=t.indexOf(i._activeItem);n>-1&&n!==i._activeItemIndex&&(i._activeItemIndex=n)}})}return Object.defineProperty(e.prototype,"activeItemIndex",{get:function(){return this._activeItemIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeItem",{get:function(){return this._activeItem},enumerable:!0,configurable:!0}),e.prototype.withScrollSize=function(e){return this.scrollSize=e,this},e.prototype.withWrap=function(){return this.wrap=!0,this},e.prototype.withVerticalOrientation=function(e){return void 0===e&&(e=!0),this.vertical=e,this},e.prototype.withHorizontalOrientation=function(e){return this.horizontal=e,this},e.prototype.withTypeAhead=function(e,t){var i=this;if(void 0===e&&(e=200),void 0===t&&(t=0),this._items.length&&this._items.some(function(e){return"function"!=typeof e.getLabel}))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this.typeaheadSubscription.unsubscribe(),this.typeaheadSubscription=this.letterKeyStream.pipe(r.tap(function(e){return i.pressedLetters.push(e)}),r.debounceTime(e),r.filter(function(){return i.pressedLetters.length>0}),r.map(function(){return i.pressedLetters.join("")})).subscribe(function(e){if(-1===t)return void(i.pressedLetters=[]);for(var n=i._items.toArray(),r=1;r<n.length+1;r++){var o=(i._activeItemIndex+r)%n.length,s=n[o];if(!s.disabled&&s.getLabel().toUpperCase().trim().indexOf(e)===t){i.setActiveItem(o);break}}i.pressedLetters=[]}),this},e.prototype.setActiveItem=function(e){this.previousActiveItemIndex=this._activeItemIndex,this.updateActiveItem(e),this._activeItemIndex!==this.previousActiveItemIndex&&this.change.next(this._activeItemIndex)},e.prototype.onKeydown=function(e){var t=e.keyCode;switch(t){case i.TAB:return void this.tabOut.next();case i.DOWN_ARROW:if(this.vertical){this.setNextItemActive();break}return;case i.UP_ARROW:if(this.vertical){this.setPreviousItemActive();break}return;case i.RIGHT_ARROW:if("ltr"===this.horizontal){this.setNextItemActive();break}if("rtl"===this.horizontal){this.setPreviousItemActive();break}return;case i.LEFT_ARROW:if("ltr"===this.horizontal){this.setPreviousItemActive();break}if("rtl"===this.horizontal){this.setNextItemActive();break}return;default:return void(e.key&&1===e.key.length?this.letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=i.A&&t<=i.Z||t>=i.ZERO&&t<=i.NINE)&&this.letterKeyStream.next(String.fromCharCode(t)))}this.pressedLetters=[],e.preventDefault()},e.prototype.setFirstItemActive=function(){this.setActiveItemByIndex(0,1)},e.prototype.setLastItemActive=function(){this.setActiveItemByIndex(this._items.length-1,-1)},e.prototype.setNextItemActive=function(){this._activeItemIndex<0?this.setFirstItemActive():this.setActiveItemByDelta(1)},e.prototype.setPreviousItemActive=function(){this._activeItemIndex<0&&this.wrap?this.setLastItemActive():this.setActiveItemByDelta(-1)},e.prototype.setNextPageItemActive=function(e){void 0===e&&(e=this.scrollSize),this._activeItemIndex+e>=this._items.length?this.setLastItemActive():this.setActiveItemByDelta(e)},e.prototype.setPreviousPageItemActive=function(e){void 0===e&&(e=this.scrollSize),this._activeItemIndex-e<=0?this.setFirstItemActive():this.setActiveItemByDelta(-e)},e.prototype.updateActiveItem=function(e){var t=this._items.toArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItemIndex=i,this._activeItem=t[i]},e.prototype.setActiveItemByDelta=function(e){this.wrap?this.setActiveInWrapMode(e):this.setActiveInDefaultMode(e)},e.prototype.setActiveInWrapMode=function(e){for(var t=this.getItemsArray(),i=1;i<=t.length;i++){var n=(this._activeItemIndex+e*i+t.length)%t.length,r=t[n];if(!this.skipPredicateFn(r))return void this.setActiveItem(n)}},e.prototype.setActiveInDefaultMode=function(e){this.setActiveItemByIndex(this._activeItemIndex+e,e)},e.prototype.setActiveItemByIndex=function(e,t){var i=this.getItemsArray();if(i[e]){for(var n=e;this.skipPredicateFn(i[n]);)if(n+=t,!i[n])return;this.setActiveItem(n)}},e.prototype.getItemsArray=function(){return this._items instanceof t.QueryList?this._items.toArray():this._items},e}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setActiveItem=function(t){this.activeItem&&this.activeItem.setInactiveStyles(),e.prototype.setActiveItem.call(this,t),this.activeItem&&this.activeItem.setActiveStyles()},t}(m),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.origin="program",t}return c(t,e),t.prototype.setFocusOrigin=function(e){return this.origin=e,this},t.prototype.setActiveItem=function(t){e.prototype.setActiveItem.call(this,t),this.activeItem&&this.activeItem.focus(this.origin)},t}(m),v=function(){function e(e,t){this._ngZone=e,this._platform=t,this.origin=null,this.windowFocused=!1,this.elementInfo=new Map,this.monitoredElementCount=0,this.unregisterGlobalListeners=function(){}}return e.prototype.monitor=function(e,t){var i=this;if(void 0===t&&(t=!1),!this._platform.isBrowser)return n.of(null);if(this.elementInfo.has(e)){var r=this.elementInfo.get(e);return r.checkChildren=t,r.subject.asObservable()}var o={unlisten:function(){},checkChildren:t,subject:new n.Subject};this.elementInfo.set(e,o),this.incrementMonitoredElementCount();var s=function(t){return i.onFocus(t,e)},c=function(t){return i._onBlur(t,e)};return this._ngZone.runOutsideAngular(function(){e.addEventListener("focus",s,!0),e.addEventListener("blur",c,!0)}),o.unlisten=function(){e.removeEventListener("focus",s,!0),e.removeEventListener("blur",c,!0)},o.subject.asObservable()},e.prototype.stopMonitoring=function(e){var t=this.elementInfo.get(e);t&&(t.unlisten(),t.subject.complete(),this.setClasses(e),this.elementInfo.delete(e),this.decrementMonitoredElementCount())},e.prototype.focusVia=function(e,t){this.setOriginForCurrentEventQueue(t),"function"==typeof e.focus&&e.focus()},e.prototype.ngOnDestroy=function(){var e=this;this.elementInfo.forEach(function(t,i){return e.stopMonitoring(i)})},e.prototype._onBlur=function(e,t){var i=this.elementInfo.get(t);!i||i.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this.setClasses(t),i.subject.next(null))},e.prototype.registerGlobalListeners=function(){var e=this;if(this._platform.isBrowser){var t=function(){e.lastTouchTarget=null,e.setOriginForCurrentEventQueue("keyboard")},i=function(){e.lastTouchTarget||e.setOriginForCurrentEventQueue("mouse")},n=function(t){null!=e.touchTimeoutId&&clearTimeout(e.touchTimeoutId),e.lastTouchTarget=t.target,e.touchTimeoutId=window.setTimeout(function(){return e.lastTouchTarget=null},650)},r=function(){e.windowFocused=!0,e.windowFocusTimeoutId=window.setTimeout(function(){return e.windowFocused=!1},0)};this._ngZone.runOutsideAngular(function(){document.addEventListener("keydown",t,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("touchstart",n,!o.supportsPassiveEventListeners()||{passive:!0,capture:!0}),window.addEventListener("focus",r)}),this.unregisterGlobalListeners=function(){document.removeEventListener("keydown",t,!0),document.removeEventListener("mousedown",i,!0),document.removeEventListener("touchstart",n,!o.supportsPassiveEventListeners()||{passive:!0,capture:!0}),window.removeEventListener("focus",r),clearTimeout(e.windowFocusTimeoutId),clearTimeout(e.touchTimeoutId),clearTimeout(e.originTimeoutId)}}},e.prototype.toggleClass=function(e,t,i){i?e.classList.add(t):e.classList.remove(t)},e.prototype.setClasses=function(e,t){this.elementInfo.get(e)&&(this.toggleClass(e,"cdk-focused",!!t),this.toggleClass(e,"cdk-touch-focused","touch"===t),this.toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this.toggleClass(e,"cdk-mouse-focused","mouse"===t),this.toggleClass(e,"cdk-program-focused","program"===t))},e.prototype.setOriginForCurrentEventQueue=function(e){var t=this;this._ngZone.runOutsideAngular(function(){t.origin=e,t.originTimeoutId=window.setTimeout(function(){return t.origin=null})})},e.prototype.wasCausedByTouch=function(e){var t=e.target;return this.lastTouchTarget instanceof Node&&t instanceof Node&&(t===this.lastTouchTarget||t.contains(this.lastTouchTarget))},e.prototype.onFocus=function(e,t){var i=this.elementInfo.get(t);if(i&&(i.checkChildren||t===e.target)){var n=this.origin;n||(n=this.windowFocused&&this.lastFocusOrigin?this.lastFocusOrigin:this.wasCausedByTouch(e)?"touch":"program"),this.setClasses(t,n),this.emitOrigin(i.subject,n),this.lastFocusOrigin=n}},e.prototype.emitOrigin=function(e,t){this._ngZone.run(function(){return e.next(t)})},e.prototype.incrementMonitoredElementCount=function(){1==++this.monitoredElementCount&&this.registerGlobalListeners()},e.prototype.decrementMonitoredElementCount=function(){--this.monitoredElementCount||(this.unregisterGlobalListeners(),this.unregisterGlobalListeners=function(){})},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:t.NgZone},{type:o.Platform}]},e.ngInjectableDef=t["ɵɵdefineInjectable"]({factory:function(){return new e(t["ɵɵinject"](t.NgZone),t["ɵɵinject"](o.Platform))},token:e,providedIn:"root"}),e}(),y=function(){function e(e,i){var n=this;this._elementRef=e,this._focusMonitor=i,this.cdkFocusChange=new t.EventEmitter,this.monitorSubscription=this._focusMonitor.monitor(this._elementRef.nativeElement,this._elementRef.nativeElement.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(function(e){return n.cdkFocusChange.emit(e)})}return e.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._elementRef.nativeElement),this.monitorSubscription.unsubscribe()},e.decorators=[{type:t.Directive,args:[{selector:"[cdkMonitorElementFocus], [cdkMonitorSubtreeFocus]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:v}]},e.propDecorators={cdkFocusChange:[{type:t.Output}]},e}(),g={provide:v,deps:[[new t.Optional,new t.SkipSelf,v],t.NgZone,o.Platform],useFactory:u},I=" ",b=0,A=new Map,_=null,E=function(){function e(e){this.document=e}return e.prototype.describe=function(e,t){this.canBeDescribed(e,t)&&(A.has(t)||this.createMessageElement(t),this.isElementDescribedByMessage(e,t)||this.addMessageReference(e,t))},e.prototype.removeDescription=function(e,t){if(this.isElementNode(e)){this.isElementDescribedByMessage(e,t)&&this.removeMessageReference(e,t);var i=A.get(t);i&&0===i.referenceCount&&this.deleteMessageElement(t),_&&0===_.childNodes.length&&this.deleteMessagesContainer()}},e.prototype.ngOnDestroy=function(){var e=this;Array.from(this.document.querySelectorAll("[cdk-describedby-host]")).forEach(function(t){e.removeCdkDescribedByReferenceIds(t),t.removeAttribute("cdk-describedby-host")}),_&&this.deleteMessagesContainer(),A.clear()},e.prototype.createMessageElement=function(e){var t=this.document.createElement("div");t.setAttribute("id","cdk-describedby-message-"+b++),t.appendChild(this.document.createTextNode(e)),this.createMessagesContainer(),_.appendChild(t),A.set(e,{messageElement:t,referenceCount:0})},e.prototype.deleteMessageElement=function(e){var t=A.get(e),i=t&&t.messageElement;_&&i&&_.removeChild(i),A.delete(e)},e.prototype.createMessagesContainer=function(){if(!_){var e=this.document.getElementById("cdk-describedby-message-container");e&&e.parentNode.removeChild(e),_=this.document.createElement("div"),_.id="cdk-describedby-message-container",_.setAttribute("aria-hidden","true"),_.style.display="none",this.document.body.appendChild(_)}},e.prototype.deleteMessagesContainer=function(){_&&_.parentNode&&(_.parentNode.removeChild(_),_=null)},e.prototype.removeCdkDescribedByReferenceIds=function(e){var t=h(e,"aria-describedby").filter(function(e){return 0!==e.indexOf("cdk-describedby-message")});e.setAttribute("aria-describedby",t.join(" "))},e.prototype.addMessageReference=function(e,t){var i=A.get(t);a(e,"aria-describedby",i.messageElement.id),e.setAttribute("cdk-describedby-host",""),i.referenceCount++},e.prototype.removeMessageReference=function(e,t){var i=A.get(t);i.referenceCount--,d(e,"aria-describedby",i.messageElement.id),e.removeAttribute("cdk-describedby-host")},e.prototype.isElementDescribedByMessage=function(e,t){var i=h(e,"aria-describedby"),n=A.get(t),r=n&&n.messageElement.id;return!!r&&-1!==i.indexOf(r)},e.prototype.canBeDescribed=function(e,t){if(!this.isElementNode(e))return!1;var i=null==t?"":(""+t).trim(),n=e.getAttribute("aria-label");return!!i&&(!n||n.trim()!==i)},e.prototype.isElementNode=function(e){return e.nodeType===this.document.ELEMENT_NODE},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[s.DOCUMENT]}]}]},e.ngInjectableDef=t["ɵɵdefineInjectable"]({factory:function(){return new e(t["ɵɵinject"](s.DOCUMENT))},token:e,providedIn:"root"}),e}(),C=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[s.CommonModule,o.PlatformModule],declarations:[y],exports:[y],providers:[g]}]}],e}();e.A11yModule=C,e.ActiveDescendantKeyManager=p,e.AriaDescriber=E,e.CDK_DESCRIBEDBY_HOST_ATTRIBUTE="cdk-describedby-host",e.CDK_DESCRIBEDBY_ID_PREFIX="cdk-describedby-message",e.CdkMonitorFocus=y,e.FOCUS_MONITOR_PROVIDER=g,e.FOCUS_MONITOR_PROVIDER_FACTORY=u,e.FocusKeyManager=f,e.FocusMonitor=v,e.ListKeyManager=m,e.MESSAGES_CONTAINER_ID="cdk-describedby-message-container",e.TOUCH_BUFFER_MS=650,e.addAriaReferencedId=a,e.getAriaReferenceIds=h,e.removeAriaReferencedId=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=cdk-a11y.umd.min.js.map
